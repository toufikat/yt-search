!function(f){var g;"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define([],f):(g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.ytSearch=f())}(function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var p="function"==typeof require&&require;if(!f&&p)return p(i,!0);if(u)return u(i,!0);throw p=new Error("Cannot find module '"+i+"'"),p.code="MODULE_NOT_FOUND",p}p=n[i]={exports:{}},e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var _cheerio=require("cheerio"),_dasu=require("dasu");require("async.parallellimit");_dasu.follow=!1,_dasu.debug=!1;var _require=require("./util.js"),_getScripts=_require._getScripts,_findLine=_require._findLine,_between=_require._between,_jp=require("jsonpath"),_userAgent="Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) (yt-search; https://www.npmjs.com/package/yt-search)",_url=require("url"),_envs={};Object.keys(process.env).forEach(function(key){var n=process.env[key];if("0"==n||"false"==n||!n)return _envs[key]=!1;_envs[key]=n});var _debugging=_envs.debug;function debug(){_debugging&&console.log.apply(this,arguments)}var opts,_querystring=require("querystring"),_humanTime=require("human-time"),TEMPLATES={YT:"https://youtube.com",SEARCH_MOBILE:"https://m.youtube.com/results",SEARCH_DESKTOP:"https://www.youtube.com/results"};function search(query,callback){if(!callback)return new Promise(function(resolve,reject){search(query,function(err,data){return err?reject(err):void resolve(data)})});var _options="string"==typeof query?{query:query}:query;return _options.userAgent&&(_userAgent=_options.userAgent),_options.search=_options.query||_options.search,_options.original_search=_options.search,_options.videoId?function(opts,callback){debug("fn: getVideoMetaData"),"string"==typeof opts&&(params=opts);"object"===_typeof(opts)&&(params=opts.videoId);var params="https://www.youtube.com/watch?hl=en&gl=US&v="+params,params=_url.parse(params);params.headers={"user-agent":_userAgent,accept:"text/html","accept-encoding":"gzip","accept-language":"en-US"},params.headers["user-agent"]="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1.1 Safari/605.1.15",_dasu.req(params,function(err,res,body){if(err)callback(err);else{if(200!==res.status)return callback("http status: "+res.status);var fs;_debugging&&(fs=require("fs"),require("path"),fs.writeFileSync("dasu.response",res.responseText,"utf8"));try{!function(thumbnailUrl,callback){debug("_parseVideoInitialData"),thumbnailUrl=_getScripts(thumbnailUrl);var duration=_between(_findLine(/ytInitialData.*=\s*{/,thumbnailUrl),"{","}");if(!duration)return callback("could not find inital data in the html document");var uploadDate=_between(_findLine(/ytInitialPlayerResponse.*=\s*{/,thumbnailUrl),"{","}");if(!uploadDate)return callback("could not find inital player data in the html document");var agoText=JSON.parse(duration),ipdata=JSON.parse(uploadDate),videoId=_jp.value(agoText,"$..currentVideoEndpoint..videoId");if(!videoId)return callback("video unavailable");if("ERROR"===_jp.value(ipdata,"$..status")||"Video unavailable"===_jp.value(ipdata,"$..reason"))return callback("video unavailable");var title=_jp.value(agoText,"$..videoPrimaryInfoRenderer..title..text")||_jp.value(agoText,"$..videoPrimaryInfoRenderer..title..simpleText")||_jp.value(agoText,"$..videoPrimaryRenderer..title..text")||_jp.value(agoText,"$..videoPrimaryRenderer..title..simpleText")||_jp.value(agoText,"$..title..text")||_jp.value(agoText,"$..title..simpleText"),description=_jp.query(agoText,"$..description..text").join("")||_jp.query(ipdata,"$..description..simpleText").join("")||_jp.query(ipdata,"$..microformat..description..simpleText").join("")||_jp.query(ipdata,"$..videoDetails..shortDescription").join(""),author_name=_jp.value(agoText,"$..owner..title..text")||_jp.value(agoText,"$..owner..title..simpleText"),video=_jp.value(agoText,"$..owner..navigationEndpoint..url")||_jp.value(agoText,"$..owner..title..url"),thumbnailUrl="https://i.ytimg.com/vi/"+videoId+"/hqdefault.jpg",duration=Number(_jp.value(ipdata,"$..videoDetails..lengthSeconds")),uploadDate=function(s){var t="",h=Math.floor(s/36e5),m=Math.floor(s/6e4)%60,s=Math.floor(s/1e3)%60;h&&(t+=h+":");m&&(t+=m+":");String(s).length<2&&(t+="0");return t+=s,t}(1e3*duration),duration=_parseDuration(uploadDate),uploadDate=_jp.value(agoText,"$..sentimentBar..tooltip").split(/[,.]/).join("").split(/\D+/),uploadDate=(Number(uploadDate[0]),Number(uploadDate[1]),_jp.value(agoText,"$..uploadDate")||_jp.value(agoText,"$..dateText..simpleText")),agoText=uploadDate&&_humanTime(new Date(uploadDate))||"",video={title:title,description:description,url:TEMPLATES.YT+"/watch?v="+videoId,videoId:videoId,seconds:Number(duration.seconds),timestamp:duration.timestamp,duration:duration,views:Number(_jp.value(ipdata,"$..videoDetails..viewCount")),genre:(_jp.value(ipdata,"$..category")||"").toLowerCase(),uploadDate:_toInternalDateString(uploadDate),ago:agoText,image:thumbnailUrl,thumbnail:thumbnailUrl,author:{name:author_name,url:TEMPLATES.YT+video}};callback(null,video)}(body,callback)}catch(err){callback(err)}}})}(_options.videoId,callback):_options.listId?function(opts,callback){debug("fn: getPlaylistMetaData"),"string"==typeof opts&&(params=opts);"object"===_typeof(opts)&&(params=opts.listId||opts.playlistId);var params="https://www.youtube.com/playlist?hl=en&gl=US&list="+params,params=_url.parse(params);params.headers={"user-agent":_userAgent,accept:"text/html","accept-encoding":"gzip","accept-language":"en-US"},_dasu.req(params,function(err,res,body){if(err)callback(err);else{if(200!==res.status)return callback("http status: "+res.status);var fs;_debugging&&(fs=require("fs"),require("path"),fs.writeFileSync("dasu.response",res.responseText,"utf8"));try{!function(viewCount,callback){debug("fn: parsePlaylistBody"),viewCount=_getScripts(viewCount);var list=viewCount.match(/ytInitialData.*=\s*({.*});/)[1];if(!list)throw new Error("failed to parse ytInitialData json data");var playlist=JSON.parse(list),listId=_jp.value(playlist,"$..microformat..urlCanonical").split("=")[1],viewCount=_jp.value(playlist,"$..sidebar.playlistSidebarRenderer.items[0]..stats[1].simpleText").match(/\d+/),list=_jp.query(playlist,"$..playlistVideoListRenderer..contents")[0],videos=[];list.forEach(function(duration){var video=duration,duration=_parseDuration(_jp.value(video,"$..lengthText..simpleText")||_jp.value(video,"$..thumbnailOverlayTimeStatusRenderer..simpleText")||_jp.query(video,"$..lengthText..text").join("")||_jp.query(video,"$..thumbnailOverlayTimeStatusRenderer..text").join("")),video={title:_jp.value(video,"$..title..simpleText")||_jp.value(video,"$..title..text")||_jp.query(video,"$..title..text").join(""),videoId:_jp.value(video,"$..videoId"),listId:listId,thumbnail:_jp.value(video,"$..thumbnail..thumbnails[0]..url").split("?")[0],duration:duration,author:{name:_jp.value(video,"$..shortBylineText..runs[0]..text"),url:"https://youtube.com"+_jp.value(video,"$..shortBylineText..runs[0]..url")}};videos.push(video)}),playlist={title:_jp.value(playlist,"$..microformat..title"),listId:listId,url:"https://youtube.com/playlist?list="+listId,views:Number(viewCount),date:function(lastUpdateLabel){debug("fn: _parsePlaylistLastUpdateTime");for(var words=lastUpdateLabel.trim().split(/[\s.-]+/),i=0;i<words.length;i++){var b=words.slice(i),_a=b.join(" "),b=b.reverse().join(" "),_a=new Date(_a),b=new Date(b);if("Invalid Date"!==_a.toString())return _toInternalDateString(_a);if("Invalid Date"!==b.toString())return _toInternalDateString(b)}return""}(_jp.value(playlist,"$..sidebar.playlistSidebarRenderer.items[0]..stats[2]..simpleText")||_jp.query(playlist,"$..sidebar.playlistSidebarRenderer.items[0]..stats[2]..text").join("")||""),image:videos[0].thumbnail,thumbnail:videos[0].thumbnail,videos:videos,author:{name:_jp.value(playlist,"$..videoOwner..title..runs[0]..text"),url:"https://youtube.com"+_jp.value(playlist,"$..videoOwner..navigationEndpoint..url")}},callback&&callback(null,playlist)}(body,callback)}catch(err){callback(err)}}})}(_options.listId,callback):_options.search?void function getSearchResults(_options,callback){var q=_querystring.escape(_options.search).split(/\s+/);var hl=_options.hl||"en";var gl=_options.gl||"US";var category=_options.category||"";var params=Number(_options.pageStart)||1;var pageEnd=Number(_options.pageEnd)||Number(_options.pages)||1;params<=0&&(params=1,1<=pageEnd&&(pageEnd+=1));Number.isNaN(pageEnd)&&callback("error: pageEnd must be a number");_options.pageStart=params;_options.pageEnd=pageEnd;_options.currentPage=_options.currentPage||params;params="?";params+="search_query="+q.join("+");-1===params.indexOf("&hl=")&&(params+="&hl="+hl);-1===params.indexOf("&gl=")&&(params+="&gl="+gl);category&&(params+="&category="+category);_options.sp&&(params+="&sp="+_options.sp);params=TEMPLATES.SEARCH_DESKTOP+params;var params=_url.parse(params);params.headers={"user-agent":_userAgent,accept:"text/html","accept-encoding":"gzip","accept-language":"en-US"};debug(params);debug("getting results: "+_options.currentPage);_dasu.req(params,function(err,res,body){if(err)callback(err);else{if(200!==res.status)return callback("http status: "+res.status);var fs;_debugging&&(fs=require("fs"),require("path"),fs.writeFileSync("dasu.response",res.responseText,"utf8"));try{_parseSearchResultInitialData(body,function(_playlists,_all){if(_playlists)return callback(_playlists);var _channels=_all,videos=_channels.filter(_videoFilter),_live=_channels.filter(_playlistFilter),_videos=_channels.filter(_channelFilter),_playlists=_channels.filter(_liveFilter),_channels=_channels.filter(_allFilter);_options._data=_options._data||{},_options._data.videos=_options._data.videos||[],_options._data.playlists=_options._data.playlists||[],_options._data.channels=_options._data.channels||[],_options._data.live=_options._data.live||[],_options._data.all=_options._data.all||[],videos.forEach(function(item){_options._data.videos.push(item)}),_live.forEach(function(item){_options._data.playlists.push(item)}),_videos.forEach(function(item){_options._data.channels.push(item)}),_playlists.forEach(function(item){_options._data.live.push(item)}),_channels.forEach(function(item){_options._data.all.push(item)}),_options.currentPage++;_live=_options.currentPage<=_options.pageEnd;_live&&_all._sp?(_options.sp=_all._sp,setTimeout(function(){getSearchResults(_options,callback)},2500)):(_videos=_options._data.videos.filter(_videoFilter),_playlists=_options._data.playlists.filter(_playlistFilter),_channels=_options._data.channels.filter(_channelFilter),_live=_options._data.live.filter(_liveFilter),_all=_options._data.all.slice(_allFilter),callback(null,{all:_all,videos:_videos,live:_live,playlists:_playlists,lists:_playlists,accounts:_channels,channels:_channels}))})}catch(err){callback(err)}}})}(_options,callback):callback(Error("yt-search: no query given"))}function _videoFilter(video,index,firstIndex){if("video"!==video.type)return!1;var videoId=video.videoId,firstIndex=firstIndex.findIndex(function(el){return videoId===el.videoId});return firstIndex===index}function _playlistFilter(result,index,firstIndex){if("list"!==result.type)return!1;var id=result.listId,firstIndex=firstIndex.findIndex(function(el){return id===el.listId});return firstIndex===index}function _channelFilter(result,index,firstIndex){if("channel"!==result.type)return!1;var url=result.url,firstIndex=firstIndex.findIndex(function(el){return url===el.url});return firstIndex===index}function _liveFilter(result,index,firstIndex){if("live"!==result.type)return!1;var videoId=result.videoId,firstIndex=firstIndex.findIndex(function(el){return videoId===el.videoId});return firstIndex===index}function _allFilter(result,index,firstIndex){switch(result.type){case"video":case"list":case"channel":case"live":break;default:return!1}var url=result.url,firstIndex=firstIndex.findIndex(function(el){return url===el.url});return firstIndex===index}function _parseSearchResultInitialData(ctoken,callback){var re=/{.*}/,$=_cheerio.load(ctoken),initialData=$("div#initial-data").html()||"",initialData=re.exec(initialData)||"";if(!initialData)for(var scripts=$("script"),i=0;i<scripts.length;i++){var lines=$(scripts[i]).html(),lines=lines.split("\n");lines.forEach(function(line){for(;0<=(match=line.indexOf("ytInitialData"));){line=line.slice(match+"ytInitialData".length);var match=re.exec(line);match&&match.length>initialData.length&&(initialData=match)}})}if(!initialData)return callback("could not find inital data in the html document");var errors=[],results=[],ctoken=JSON.parse(initialData[0]),items=_jp.query(ctoken,"$..itemSectionRenderer..contents.*");debug("items.length: "+items.length);for(var _i=0;_i<items.length;_i++){var item=items[_i],result=void 0,type="unknown",channelId=item.compactPlaylistRenderer||item.playlistRenderer,watchingLabel=item.compactChannelRenderer||item.channelRenderer,isLive=item.compactVideoRenderer||item.videoRenderer,listId=channelId&&_jp.value(item,"$..playlistId"),channelId=watchingLabel&&_jp.value(item,"$..channelId"),videoId=isLive&&_jp.value(item,"$..videoId"),watchingLabel=_jp.query(item,"$..viewCountText..text").join(""),isLive="UPCOMING"===_jp.query(item,"$..thumbnailOverlayTimeStatusRenderer..style").join("").trim(),isLive=0<=watchingLabel.indexOf("watching")||"LIVE"===_jp.query(item,"$..thumbnailOverlayTimeStatusRenderer..text").join("").trim()||isLive;videoId&&(type="video"),channelId&&(type="channel"),listId&&(type="list"),isLive&&(type="live");try{switch(type){case"video":var thumbnail=_normalizeThumbnail(_jp.value(item,"$..thumbnail..url"))||_normalizeThumbnail(_jp.value(item,"$..thumbnails..url"))||_normalizeThumbnail(_jp.value(item,"$..thumbnails")),title=_jp.value(item,"$..title..text")||_jp.value(item,"$..title..simpleText"),_title=_jp.value(item,"$..shortBylineText..text")||_jp.value(item,"$..longBylineText..text"),_url2=_jp.value(item,"$..shortBylineText..url")||_jp.value(item,"$..longBylineText..url"),agoText=_jp.value(item,"$..publishedTimeText..text")||_jp.value(item,"$..publishedTimeText..simpleText"),description=_jp.value(item,"$..viewCountText..text")||_jp.value(item,"$..viewCountText..simpleText")||"0",_thumbnail=Number(description.split(/\s+/)[0].split(/[,.]/).join("").trim()),url=_jp.value(item,"$..lengthText..text")||_jp.value(item,"$..lengthText..simpleText"),duration=_parseDuration(url||"0:00"),description=_jp.query(item,"$..description..text").join("")||_jp.query(item,"$..descriptionSnippet..text").join(""),url=TEMPLATES.YT+"/watch?v="+videoId,result={type:"video",videoId:videoId,url:url,title:title.trim(),description:description,image:thumbnail,thumbnail:thumbnail,seconds:Number(duration.seconds),timestamp:duration.timestamp,duration:duration,ago:agoText,views:Number(_thumbnail),author:{name:_title,url:TEMPLATES.YT+_url2}};break;case"list":var _thumbnail=_normalizeThumbnail(_jp.value(item,"$..thumbnail..url"))||_normalizeThumbnail(_jp.value(item,"$..thumbnails..url"))||_normalizeThumbnail(_jp.value(item,"$..thumbnails")),_title=_jp.value(item,"$..title..text")||_jp.value(item,"$..title..simpleText"),_title3=_jp.value(item,"$..shortBylineText..text")||_jp.value(item,"$..longBylineText..text")||_jp.value(item,"$..shortBylineText..simpleText")||_jp.value(item,"$..longBylineText..simpleTextn")||"YouTube",_author_name3=_jp.value(item,"$..shortBylineText..url")||_jp.value(item,"$..longBylineText..url")||"",_thumbnail3=_jp.value(item,"$..videoCountShortText..text")||_jp.value(item,"$..videoCountText..text")||_jp.value(item,"$..videoCountShortText..simpleText")||_jp.value(item,"$..videoCountText..simpleText")||_jp.value(item,"$..thumbnailText..text")||_jp.value(item,"$..thumbnailText..simpleText"),_url2=TEMPLATES.YT+"/playlist?list="+listId;result={type:"list",listId:listId,url:_url2,title:_title.trim(),image:_thumbnail,thumbnail:_thumbnail,videoCount:_thumbnail3,author:{name:_title3,url:TEMPLATES.YT+_author_name3}};break;case"channel":var _description=_normalizeThumbnail(_jp.value(item,"$..thumbnail..url"))||_normalizeThumbnail(_jp.value(item,"$..thumbnails..url"))||_normalizeThumbnail(_jp.value(item,"$..thumbnails")),watchCount=_jp.value(item,"$..title..text")||_jp.value(item,"$..title..simpleText")||_jp.value(item,"$..displayName..text"),_author_url2=_jp.value(item,"$..shortBylineText..text")||_jp.value(item,"$..longBylineText..text")||_jp.value(item,"$..displayName..text")||_jp.value(item,"$..displayName..simpleText"),_url4=_jp.value(item,"$..videoCountText..text")||_jp.value(item,"$..videoCountText..simpleText")||"0",scheduledTime=_jp.value(item,"$..subscriberCountText..text")||_jp.value(item,"$..subscriberCountText..simpleText");"string"==typeof scheduledTime&&(scheduledTime=scheduledTime.split(/\s+/).filter(function(w){return w.match(/\d/)})[0]);var scheduledDateString=_jp.value(item,"$..navigationEndpoint..url")||"/user/"+watchCount;result={type:"channel",name:_author_url2,url:TEMPLATES.YT+scheduledDateString,title:watchCount.trim(),image:_description,thumbnail:_description,videoCount:Number(_url4.replace(/\D+/g,"")),videoCountLabel:_url4,subCount:function(num){if(!num)return;var label=num.split(/\s+/).filter(function(w){return w.match(/\d/)})[0].toLowerCase(),num=label.match(/\d+(\.\d+)?/);if(!num||!num[0])return;num=Number(num[0]);return 0<=label.indexOf("m")?1e6*num:0<=label.indexOf("k")?1e3*num:num}(scheduledTime),subCountLabel:scheduledTime};break;case"live":_thumbnail3=_normalizeThumbnail(_jp.value(item,"$..thumbnail..url"))||_normalizeThumbnail(_jp.value(item,"$..thumbnails..url"))||_normalizeThumbnail(_jp.value(item,"$..thumbnails")),_title3=_jp.value(item,"$..title..text")||_jp.value(item,"$..title..simpleText"),_author_name3=_jp.value(item,"$..shortBylineText..text")||_jp.value(item,"$..longBylineText..text"),_author_url2=_jp.value(item,"$..shortBylineText..url")||_jp.value(item,"$..longBylineText..url"),scheduledDateString=_jp.query(item,"$..viewCountText..text").join("")||_jp.query(item,"$..viewCountText..simpleText").join("")||"0",watchCount=Number(scheduledDateString.split(/\s+/)[0].split(/[,.]/).join("").trim()),_description=_jp.query(item,"$..description..text").join("")||_jp.query(item,"$..descriptionSnippet..text").join(""),_url4=_jp.value(item,"$..upcomingEventData..startTime"),scheduledTime=Date.now()>_url4?1e3*_url4:_url4,scheduledDateString=_toInternalDateString(scheduledTime),_url4=TEMPLATES.YT+"/watch?v="+videoId;result={type:"live",videoId:videoId,url:_url4,title:_title3.trim(),description:_description,image:_thumbnail3,thumbnail:_thumbnail3,watching:Number(watchCount),author:{name:_author_name3,url:TEMPLATES.YT+_author_url2}},scheduledTime?(result.startTime=scheduledTime,result.startDate=scheduledDateString,result.status="UPCOMING"):result.status="LIVE"}result&&results.push(result)}catch(err){debug(err),errors.push(err)}}ctoken=_jp.value(ctoken,"$..continuation");return results._ctoken=ctoken,errors.length?callback(errors.pop(),results):callback(null,results)}function _toInternalDateString(date){return date=new Date(date),debug("fn: _toInternalDateString"),date.getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate()}function _parseDuration(lastword){var a=lastword.split(/\s+/),lastword=a[a.length-1],timestamp=lastword.replace(/[^:.\d]/g,"");if(!timestamp)return{toString:function(){return a[0]},seconds:0,timestamp:0};for(;timestamp[timestamp.length-1].match(/\D/);)timestamp=timestamp.slice(0,-1);timestamp=timestamp.replace(/\./g,":");for(var t=timestamp.split(/[:.]/),seconds=0,exp=0,i=t.length-1;0<=i;i--)if(!(t[i].length<=0)){var number=t[i].replace(/\D/g,"");if(seconds+=parseInt(number)*(0<exp?Math.pow(60,exp):1),exp++,2<exp)break}return{toString:function(){return seconds+" seconds ("+timestamp+")"},seconds:seconds,timestamp:timestamp}}function _normalizeThumbnail(thumbnails){var t;return"string"!=typeof thumbnails?thumbnails.length?(t=thumbnails[0],_normalizeThumbnail(t)):void 0:(t=thumbnails,t=t.split("?")[0],t=t.split("/default.jpg").join("/hqdefault.jpg"),t=t.split("/default.jpeg").join("/hqdefault.jpeg"),0===t.indexOf("//")?"https://"+t.slice(2):t.split("http://").join("https://"))}module.exports=search,module.exports.search=search,require.main===module&&(opts="superman theme list pewdiepie channel",console.log("test: doing list search"),opts={query:opts,pageEnd:1},search(opts,function(playlists,channels){if(playlists)throw playlists;var videos=channels.videos,playlists=channels.playlists,channels=channels.channels;console.log("videos: "+videos.length),console.log("playlists: "+playlists.length),console.log("channels: "+channels.length);for(var i=0;i<videos.length;i++){var song=videos[i],time=" (".concat(song.timestamp,")");console.log(song.title+time)}playlists.forEach(function(p){console.log("playlist: ".concat(p.title," | ").concat(p.listId))}),channels.forEach(function(c){console.log("channel: ".concat(c.title," | ").concat(c.description))})}))},{"./util.js":2,"async.parallellimit":void 0,cheerio:void 0,dasu:void 0,fs:void 0,"human-time":void 0,jsonpath:void 0,path:void 0,querystring:void 0,url:void 0}],2:[function(util,module,exports){"use strict";var _cheerio=util("cheerio"),util={};function _findLine(regex,text){var cache=_findLine.cache||{};_findLine.cache=cache,cache[text]=cache[text]||{};var lines=cache[text].lines||text.split("\n");cache[text].lines=lines,clearTimeout(cache[text].timeout),cache[text].timeout=setTimeout(function(){delete cache[text]},100);for(var i=0;i<lines.length;i++){var line=lines[i];if(regex.test(line))return line}return""}module.exports=util,util._getScripts=function($){for(var $=_cheerio.load($),scripts=$("script"),buffer="",i=0;i<scripts.length;i++){var data=scripts[i],data=data&&data.children[0],data=data&&data.data;data&&(buffer+=data+"\n")}return buffer},util._findLine=_findLine,util._between=function(text,i,j){i=text.indexOf(i),j=text.lastIndexOf(j);return i<0||j<0?"":text.slice(i,j+1)}},{cheerio:void 0}]},{},[1])(1)});